# Task 1.

Для обеспечения требуемой доступности и отказоустойчивости сервиса InureTech необходимо:

- использовать горизонтальное масштабирование и развернуть систему в нескольких зонах доступности;
- применить независимые кластеры Kubernetes в каждой зоне;
- реализовать глобальный и внутренние балансировщики нагрузки, включить механизмы health check;
- настроить кластер PostgreSQL с репликацией и регулярным резервным копированием;
- предусмотреть автоматическое переключение трафика между зонами при сбое (фейловер);
- на начальном этапе не использовать шардирование БД, но запланировать его возможность в будущем.

[InureTech_технологическая архитектура_to-be](task1/InureTech_технологическая%20архитектура_to-be.drawio)

# Task 2.

В рамках второго задания реализовано динамическое масштабирование контейнеров в Kubernetes:

- настроен Horizontal Pod Autoscaler (HPA) для управления количеством подов на основании утилизации памяти и количества запросов в секунду (RPS);
- установлен и настроен Prometheus для экспорта и мониторинга метрик приложения;
- предусмотрены механизмы нагрузочного тестирования с использованием Locust и других инструментов;
- реализована возможность масштабирования на основе кастомных метрик, включая RPS, время отклика и другие бизнес-метрики.


[Результат пункта 1](task2/subtask1-result)

[Результат пункта 2](task2/subtask2-result)


# Task 3.

Цель решения — повысить производительность и надёжность системы InsureTech, устранив текущие проблемы с взаимодействием сервисов и подготовив архитектуру к росту нагрузки после подключения дополнительных страховых компаний.

**Основные шаги решения:**

1. **Переход на асинхронный обмен данными (Event-Streaming):** 
    - для сервисов, которые сейчас используют синхронные REST API взаимодействия (например, core-app и ins-comp-settlement с ins-product-aggregator), предлагается перейти на асинхронный обмен через события;
    - использовать брокеры сообщений (Kafka или RabbitMQ) для передачи событий между сервисами;
    - это позволит снизить задержки и улучшить устойчивость системы, так как сервисы не будут блокироваться в ожидании ответа от других компонентов.
2. **Внедрение паттерна Transactional Outbox:**
    - сервисы, которые должны отправить сообщение или событие, сначала сохраняют его в базе данных как часть транзакции, в рамках которой они создают, удаляют или обновляют бизнес-сущность;
    - сообщение сохраняется в отдельную outbox-таблицу;
    - отдельный процесс вычитывает сообщения из outbox-таблицы и отправляет их через брокер сообщений;
    - это гарантирует, что даже при сбое в процессе отправки сообщения, данные не будут потеряны, а сообщения будут отправлены после устранения проблемы.
3. **Оптимизация взаимодействия сервисов:**
    - пересмотреть взаимодействия между core-app, ins-comp-settlement и ins-product-aggregator, чтобы определить, какие из них можно перевести на Event-Streaming;
    - оставить синхронные вызовы только там, где это абсолютно необходимо, а большую часть взаимодействий реализовать через асинхронные события.
4. **Обеспечение масштабируемости и отказоустойчивости:**
    - развернуть систему в нескольких зонах доступности, чтобы распределить нагрузку и обеспечить высокую доступность;
    - использовать кластер PostgreSQL с репликацией данных между зонами;
    - внедрить глобальный и внутренние балансировщики нагрузки для равномерного распределения трафика;
    - реализовать фейловер-стратегию для автоматического переключения трафика между зонами в случае сбоя.

**Ожидаемые результаты:**

- снижение задержек и ошибок взаимодействия между сервисами;
- повышение устойчивости системы к сбоям и росту нагрузки;
- улучшение времени отклика и общей производительности системы;
- готовность архитектуры к подключению дополнительных страховых компаний и увеличению объёма данных и запросов.


[InsureTech_C4_сontainer-diagram](task3/InsureTech_C4_сontainer-diagram.drawio.xml)


# Task 4.




# Task 5.




# Task 6.



